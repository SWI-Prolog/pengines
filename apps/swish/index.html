<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>SWISH</title>
        <meta name="description" content="">
        <meta name="author" content="Torbjörn Lager">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- CSS -->
        <link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="/apps/swish/css/swish.css">
        <link rel="stylesheet" href="/apps/swish/css/term.css">
        <link rel="stylesheet" href="/pengine/plterm.css">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body>
        <header class="navbar navbar-default navbar-fixed-top">
            <div class="container pull-left">
                <div class="navbar-header">
                    <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a href="/"><img style="position:absolute;top:4px;left:4px;" src="/apps/swish/img/logo.png"></a>
                    <a href="/" style="margin-left:30px;font-size:24px" class="navbar-brand">&nbsp;<b><span style="color:darkblue">SWI</span><span style="color:maroon">SH</span></b></a>
                </div>
                <nav class="collapse navbar-collapse bs-navbar-collapse pull-left">
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">File<b class="caret"></b></a>
                            <ul id="file-menu" class="dropdown-menu">
                                <li><a id="new">New</a></li>
                                <li class="divider"></li>
                                <li><a id="save">Save</a></li>
                                <li class="divider"></li>
                                <li><a id="share">Share...</a></li>
                                <li class="divider"></li>
                                <li><a id="collaborate">Collaborate...</a></li>
                                <li class="divider"></li>
                                <li><a id="prefs">Preferences...</a></li>
                                <li class="divider"></li>
                                <li><a id="print">Print...</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Edit<b class="caret"></b></a>
                            <ul id="edit-menu" class="dropdown-menu">
                                <li><a id="undo">Undo</a></li>
                                <li><a id="redo">Redo</a></li>
                                <li class="divider"></li>
                                <li><a id="indent">Indent</a></li>
                                <li><a id="outdent">Outdent</a></li>
                                <li class="divider"></li>
                                <li><a id="comment">Toggle comment</a></li>
                                <li class="divider"></li>
                                <li><a id="find">Find and replace...</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples<b class="caret"></b></a>
                            <ul id="example-menu" class="dropdown-menu">
                                <li><a href="/apps/swish/examples/kb.pl">Knowledge bases</a></li>
                                <li><a href="/apps/swish/examples/movies.pl">Movie database</a></li>
                                <li><a href="/apps/swish/examples/lists.pl">Lists</a></li>
                                <li><a href="/apps/swish/examples/io.pl">Read and write</a></li>
                                <li><a href="/apps/swish/examples/database.pl">Assert and retract</a></li>
                                <li><a href="/apps/swish/examples/grammar.pl">DCG grammar</a></li>
                                <li><a href="/apps/swish/examples/eliza.pl">Eliza</a></li>
                                <li><a href="/apps/swish/examples/expert-system.pl">Expert system</a></li>
                                <li><a href="/apps/swish/examples/queens.pl">Queens</a></li>
                                <li><a href="/apps/swish/examples/clpfd-sudoku.pl">Sudoku (clp(fd))</a></li>
                                <li><a href="/apps/swish/examples/japanese.pl">Japanese source</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Help<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#about" data-toggle="modal">About...</a></li>
                                <li class="divider"></li>
                                <li><a href="#help" data-toggle="modal">Help...</a></li>
                                <li><a href="#caveats" data-toggle="modal">Caveats...</a></li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>
        </header>
        <div id="preferences" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h4 id="myModalLabel">Preferences</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal">
                          <legend>General</legend>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="theme-menu">Theme </label>
                              <select id="theme-menu" class="input-sm preference-menu">
                                  <option value="spyder">Spyder</option>
                                  <option value="brain">Brain</option>
                              </select>
                          </div>
                          <legend>Editor</legend>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="font-family-menu">Font family </label>
                              <select id="font-family-menu" class="input-sm preference-menu">
                                  <option value="'andale mono',monospace">Andale Mono</option>
                                  <option value="consolas,monospace">Consolas</option>
                                  <option selected value="'courier new',monospace">Courier New</option>
                                  <option value="courier,monospace">Courier</option>
                                  <option value="monaco,monospace">Monaco</option>
                                  <option value="menlo,monospace">Menlo</option>
                                  <option value="'ubuntu mono',monospace">Ubuntu Mono</option>
                                  <option value="'dejavu',monospace">Dejavu</option>
                              </select>
                          </div>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="font-size-menu">Font size </label>
                              <select id="font-size-menu" class="input-sm preference-menu">
                                  <option value="10">10</option>
                                  <option value="12">12</option>
                                  <option selected value="14">14</option>
                                  <option value="16">16</option>
                                  <option value="18">18</option>
                                  <option value="20">20</option>
                              </select>
                          </div>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="tab-size-menu">Tab size </label>
                              <select id="tab-size-menu" class="input-sm preference-menu">
                                  <option value="2">2</option>
                                  <option selected value="4">4</option>
                                  <option value="6">6</option>
                                  <option value="8">8</option>
                              </select>
                          </div>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="tab-soft-checkbox">Use soft tabs</label>
                              <input id="tab-soft-checkbox" class="input-sm" checked type="checkbox">
                          </div>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="line-wrap-checkbox">Lines</label>
                              <label class="checkbox-inline"><input id="line-wrap-checkbox" checked type="checkbox" class=""> Wrap</label>
                              <label class="checkbox-inline"><input id="line-highlight-checkbox" type="checkbox"> Highlight current</label>
                              <label class="checkbox-inline"><input id="line-numbering-checkbox" checked type="checkbox"> Show numbers</label>
                          </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="share-dialog" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h3 id="myModalLabel">Share your program!</h3>
                    </div>
                    <div class="modal-body">
                        <p>Your program is saved to the <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> server for a period of at least one month. A link to it is given below. Copy the link, send it around, do what you want with it. Anyone in possession of the link will be able to access <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> with your program loaded and ready to run.</p>
                        <p>
                            Link: <input style="width:520px;" class="input-sm" type="text" id="url" onclick="this.select()" value="">
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div id="about" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h4 id="myModalLabel2">About <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span><span class="pull-right">Version 0.9.3&nbsp;&nbsp;</span></h4>
                    </div>
                    <div class="modal-body">
                        <p><span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> was originally written by Torbjörn Lager as a homage to SWI-Prolog. Since then, Jan Wielemaker has given lots of suggestions, and also done some coding. <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> now serves also as a demo the Pengines platform. You are free to use it as a starting point for your own project.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div id="help" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h2 id="myModalLabel"><span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> = <span style="color:darkblue">SWI</span>-Prolog for <span style="color:maroon">SH</span>aring</h2>
            </div>
            <div class="modal-body">
                <h4>Table of Contents</h4>
                <ul>
                    <li><a href="#motivation">Motivation</a></li>
                    <li><a href="#exampls">Examples</a></li>
                    <li><a href="#time_limit">Time limit</a></li>
                    <li><a href="#known_issues">Known issues</a></li>
                    <li><a href="#technology">Technology</a></li>
                    <li><a href="#source_code">Source code</a></li>
                </ul>
                <h4 id="motivation">Motivation</h4>
                <p>
                    <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is inspired by web-based tools such as <a target="_blank" href="http://jsfiddle.net/">JSFIDDLE</a> in that it allows you to develop a program and then share it with others on the Web. However, lacking both debugger and profiler, <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is far from a full-fledged IDE for Prolog, and to avoid compromising the server it does not allow you to execute "dangerous" predicates such as predicates reading and writing files. (It does however allow you to use predicates such as <code>read/1</code> and <code>write/1</code> but they will only read from and write to your web browser.)
                </p>
                <p>
                    <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> might be useful in an educational setting. If you are a teacher, you may want to tell your students to share with you the solutions to exercises by sending you a link to <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> loaded with their solutions ready to run.
                </p>
                <p>
                    Yes, and talking to SWI-Prolog from an iPad or maybe even a smartphone should also work, although it has not been extensively tested yet.
                </p>
                <h4 id="exampls">Examples</h4>
                <p>
                    If you include example goals inside comments as shown below, they will be used to populate the example menu and make the first goal show in the Goal input field.
                </p>
                <pre style="font-size:80%">
/** Examples

loves(X, mia).
jealous(X, Y).

*/</pre>
                <h4 id="time_limit">Time limit</h4>
                <p>
                    When you click the First button, your goal will be allowed to execute on the server for 300 seconds before aborting and returning with a message stating that the time limit has been exceeded.
                </p>
                <h4 id="known_issues">Known issues</h4>
                <p>
                <ul>
                    <li><span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> works fine in Safari, Firefox and Chrome. I have not tested it in Internet Explorer, so I don't know if it works there.
                    </li>
                    <li>The syntax highlighting of Prolog source code as provided by the <a target="_blank" href="http://ace.ajax.org/">ACE editor</a> is slightly off sometimes. The relevant file is <a target="_blank" href="/vendor/src-noconflict/mode-prolog.js">here</a>. Please send a copy to <a target="_blank" href="mailto:torbjorn.lager@gmail.com">me</a> if you are able to fix any of the highlighting issues.
                    </li>
                </ul>
                <h4 id="technology">Technology</h4>
                <p>
                    <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is implemented in a combination of Prolog, HTML, CSS and JavaScript. The only framework used is <a target="_blank" href="http://getbootstrap.com/">Bootstrap</a> and the choice of editor landed on the very capable <a target="_blank" href="http://ace.ajax.org/">ACE editor</a>. The server serves static HTML, CSS and JavaScript code only, none of that is dynamically generated on the server. Instead, to create behaviour, the main traffic between server and client consists of the JSON responses from the server guiding the transformation of the browser's DOM on the client side.
                </p>

                <h4 id="source_code">Source code</h4>
                <p>
                    The source code for <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is available in the Pengine distribution on <a target="_blank" href="https://github.com/SWI-Prolog/pengines">GitHub</a>.
                </p>
            </div>
        </div>
            </div>
        </div>
        <div id="caveats" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h2 id="myModalLabel">Limitations of the SWISH shell</h2>
            </div>
            <div class="modal-body">
                <h4>Table of Contents</h4>
                <ul>
                    <li><a href="#sandboxing">Sandboxing</a></li>
                    <li><a href="#io">Input and output</a></li>
		</ul>
		<h4 id="sandboxing">Sandboxing</h4>
<p>
SWISH cannot provide unrestricted access to Prolog because Prolog gives
unrestricted access to the operating system.  Therefore, SWISH examines
each goal on safety before execution.  This process unfolds the call-tree
and verifies all called predicates against a whitelist.  It fails on three
occasions:
</p>

  <ul>
    <li>If insufficient information is available to decide what
        will be called.  E.g., <code>?- read(X), call(X).</code>
	Such errors are raised as <em>instantiation errors</em>.
    <li>If a predicate is found that is not whitelisted.  Such
        errors are raised as <em>permission errors</em>
    <li>If a called predicate is not defined.  Such errors are
        raised as <em>existence errors</em>
  </ul>

<p>
If any of the above happens, the error is printed, along with
a chain of intermediate goals that should help finding the culprit.
Note that the whitelist is incomplete, i.e., there are many
predicates that can be considered safe that are not on the list.
Please report such omissions as bugs.
</p>
		<h4 id="io">Input and output</h4>
<p>
Normal read and write do not work in the web environment.  A number
of normal Prolog predicates are redefined to provide basic I/O.  Other
I/O predicate are either not whitelisted or send their output to the
server's console.
</p>

  <ul>
    <li>read/1
    <li>write/1, writeq/1, print/1, write_canonical/1, write_term/2
    <li>format/1, format/2
    <li>message_hook/3, redirecting all system messages.
  </ul>
	    </div>
	</div>
	</div>
	</div>
        <!-- Begin page content -->
        <div class="container">
            <pre id="editor"></pre>
            <div id="console">
                <div id="results">
                    <div id="presentation">
                    </div>
                </div>
                <div id="controls" onclick="return false">
                    <div>
                        <pre id="cmdlineeditor"></pre>
                        <div>
                            <div>
                                <div class="btn-group dropup">
                                    <button id="examples-btn" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                    Examples
                                    <span class="caret"></span>
                                    </button>
                                    <ul id="examples" class="dropdown-menu">
                                    </ul>
                                </div>
                                <div class="btn-group dropup">
                                    <button id="history-btn" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                    History
                                    <span class="caret"></span>
                                    </button>
                                    <ul id="history" class="dropdown-menu"></ul>
                                </div>
                                <div class="btn-group">
                                    <button id="clear-btn-query" class="btn btn-default btn-xs">Clear</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div style="margin:12px 0;">
                            <button id="first-btn" class="btn btn-sm btn-primary">First</button>
                            <button id="next-btn" class="btn btn-sm btn-success" disabled>Next</button>
                            <button id="stop-btn" class="btn btn-sm btn-warning" disabled>Stop</button>
                            <button id="abort-btn" class="btn btn-sm btn-danger" disabled>Abort</button>
                            <button id="clear-btn" class="btn btn-sm btn-info pull-right">Clear</button>
                        </div>
                    </div>
                    <div>
                        <input id="reader" type="text" autocomplete="off" disabled>
                    </div>
                </div>
            </div>
        </div>
        <header class="navbar navbar-default navbar-fixed-bottom bs-docs-nav">
            <div class="footer">
                <p class="muted credit pull-left">
                    Powered by
                    <a target="_blank" href="http://www.swi-prolog.org/">SWI-Prolog</a>
                    and the
                    <a target="_blank"href="http://www.swi-prolog.org/pldoc/doc_for?object=section%28%27packages/pengines.html%27%29">Pengines package</a>.
                </p>
                <input class="pull-right" id="slider" type='range' step='1' min='30' max='70' />
            </div>
        </header>
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="/vendor/jquery/jquery-2.0.3.min.js"></script>
        <script src="/vendor/bootstrap/js/bootstrap.min.js"></script>
        <script src="/pengine/pengines.js" type="text/javascript" ></script>
        <script src="/vendor/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="/apps/swish/js/swish.js" type="text/javascript" charset="utf-8"></script>
        <script src="/apps/swish/js/term.js" type="text/javascript" charset="utf-8"></script>
        <script src="https://togetherjs.com/togetherjs-min.js"></script>
    </body>
</html>
